#!/bin/bash

TTY=`who -m | awk '{print $2;}'`

SERVICE="/etc/init.d/minecraft"
USERNAME=`$SERVICE view | awk '{print $1;}'`
SCREEN_NAME=`$SERVICE view | awk '{print $2;}'`

echo "Your tty is $TTY"
echo "Changing permissions on it."
chmod o+rw /dev/$TTY
echo "Opening MC screen."
echo "To close the screen hold CTRL, then press A, then press D, and release CTRL."
sudo su - $USERNAME -c "screen -r $SCREEN_NAME"

echo "Reverting permissions changes to your tty."
chmod o-rw /dev/$TTY

